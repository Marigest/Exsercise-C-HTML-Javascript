<!DOCTYPE html>
<html lang="it">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Buon San Valentino</title>
        <link
            rel="icon"
            href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%23c9a1ff' d='M50 86s-28-16.5-38.5-34.5C3.5 37.5 7 20 23.5 16.5 34.5 14 44 20 50 29.5 56 20 65.5 14 76.5 16.5 93 20 96.5 37.5 88.5 51.5 78 69.5 50 86 50 86z'/%3E%3C/svg%3E"
        />
        <style>
            :root {
                --lilac: #d7b7ff;
                --lilac-dark: #b58fe8;
                --white: #ffffff;
                --pink: #ff8fb7;
                --pink-dark: #ff6aa2;
            }

            * {
                box-sizing: border-box;
            }

            body {
                margin: 0;
                font-family: "Georgia", "Times New Roman", serif;
                background: radial-gradient(circle at top, #efe1ff 0%, var(--lilac) 55%, var(--lilac-dark) 100%);
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 24px;
            }

            .hearts {
                position: fixed;
                inset: 0;
                pointer-events: none;
                overflow: hidden;
                z-index: 0;
            }

            .hearts span {
                position: absolute;
                bottom: -10vh;
                width: 20px;
                height: 20px;
                background: #ff6fae;
                transform: rotate(45deg);
                opacity: 0.9;
                animation: float-heart 10s linear infinite;
                box-shadow: 0 0 12px rgba(255, 111, 174, 0.6);
            }

            .hearts span::before,
            .hearts span::after {
                content: "";
                position: absolute;
                width: 20px;
                height: 20px;
                background: #ff6fae;
                border-radius: 50%;
            }

            .hearts span::before {
                top: -10px;
                left: 0;
            }

            .hearts span::after {
                left: -10px;
                top: 0;
            }

            .card {
                background: var(--white);
                border-radius: 20px;
                padding: 36px 32px 28px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
                max-width: 640px;
                width: 100%;
                text-align: center;
                border: 4px solid #f5e9ff;
                position: relative;
                z-index: 1;
            }

            h1 {
                margin: 0 0 24px;
                font-size: 28px;
                letter-spacing: 0.5px;
                color: #5a2a82;
            }

            .buttons {
                display: flex;
                gap: 16px;
                justify-content: center;
                align-items: center;
                flex-wrap: wrap;
                margin-bottom: 18px;
                position: relative;
            }

            button {
                border: none;
                border-radius: 999px;
                padding: 14px 28px;
                font-size: 18px;
                cursor: pointer;
                transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
                box-shadow: 0 8px 18px rgba(0, 0, 0, 0.15);
            }

            #btn-si {
                background: var(--pink);
                color: #4b0f2b;
                transform: scale(1);
            }

            #btn-no {
                background: #e0e0e0;
                color: #3a3a3a;
                transform: scale(1);
                position: static;
            }

            #btn-no.no-fleeing {
                position: fixed;
                z-index: 3;
                transition: left 0.18s ease, top 0.18s ease, transform 0.15s ease;
            }

            .video-box {
                display: none;
                margin-top: 16px;
            }

            .video-box.active {
                display: block;
            }

            .show-video .card {
                background: transparent;
                box-shadow: none;
                border: none;
                padding: 0;
                max-width: 900px;
                width: min(90vw, 900px);
            }

            .show-video h1,
            .show-video .buttons,
            .show-video .note {
                display: none;
            }

            .show-video .video-box {
                display: block;
            }

            .modal {
                position: fixed;
                inset: 0;
                display: none;
                align-items: center;
                justify-content: center;
                background: rgba(0, 0, 0, 0.5);
                padding: 24px;
                z-index: 5;
            }

            .modal.open {
                display: flex;
            }

            .modal.open .modal-content {
                animation: pop-in 0.25s ease-out;
            }

            .modal-content {
                background: #fff7ff;
                border-radius: 18px;
                padding: 24px;
                max-width: 520px;
                width: 100%;
                text-align: center;
                box-shadow: 0 18px 40px rgba(0, 0, 0, 0.25);
                border: 3px solid #f5e9ff;
            }

            .modal-content p {
                margin: 0 0 18px;
                font-size: 18px;
                color: #5a2a82;
                word-break: break-word;
            }

            .modal-content button {
                background: var(--pink-dark);
                color: #4b0f2b;
            }


            video {
                width: 100%;
                max-height: 70vh;
                object-fit: contain;
                border-radius: 16px;
                border: 3px solid #f3d9ff;
            }

            .note {
                margin: 0;
                font-size: 14px;
                color: #6b3d8a;
            }

            @media (max-width: 480px) {
                h1 {
                    font-size: 22px;
                }

                button {
                    font-size: 16px;
                    padding: 12px 22px;
                }
            }

            @keyframes float-heart {
                0% {
                    transform: translateY(0) rotate(45deg) scale(0.8);
                    opacity: 0.7;
                }
                100% {
                    transform: translateY(-120vh) rotate(45deg) scale(1.2);
                    opacity: 0;
                }
            }

            @keyframes pop-in {
                0% {
                    transform: translateY(8px) scale(0.95);
                    opacity: 0;
                }
                100% {
                    transform: translateY(0) scale(1);
                    opacity: 1;
                }
            }
        </style>
    </head>
    <body>
        <div class="hearts" aria-hidden="true">
            <span style="left: 8%; animation-delay: 0s; animation-duration: 11s;"></span>
            <span style="left: 18%; animation-delay: 2s; animation-duration: 12s;"></span>
            <span style="left: 28%; animation-delay: 4s; animation-duration: 10s;"></span>
            <span style="left: 38%; animation-delay: 1s; animation-duration: 13s;"></span>
            <span style="left: 48%; animation-delay: 3s; animation-duration: 12s;"></span>
            <span style="left: 58%; animation-delay: 5s; animation-duration: 11s;"></span>
            <span style="left: 68%; animation-delay: 2s; animation-duration: 14s;"></span>
            <span style="left: 78%; animation-delay: 6s; animation-duration: 10s;"></span>
            <span style="left: 88%; animation-delay: 1s; animation-duration: 12s;"></span>
            <span style="left: 5%; animation-delay: 7s; animation-duration: 15s;"></span>
            <span style="left: 12%; animation-delay: 5s; animation-duration: 9s;"></span>
            <span style="left: 24%; animation-delay: 8s; animation-duration: 13s;"></span>
            <span style="left: 34%; animation-delay: 6s; animation-duration: 12s;"></span>
            <span style="left: 44%; animation-delay: 9s; animation-duration: 14s;"></span>
            <span style="left: 54%; animation-delay: 4s; animation-duration: 9s;"></span>
            <span style="left: 64%; animation-delay: 7s; animation-duration: 12s;"></span>
            <span style="left: 74%; animation-delay: 3s; animation-duration: 15s;"></span>
            <span style="left: 84%; animation-delay: 8s; animation-duration: 11s;"></span>
            <span style="left: 94%; animation-delay: 6s; animation-duration: 13s;"></span>
        </div>
        <div class="card" id="card">
            <h1>Posso rubarti a San Valentino?</h1>
            <div class="buttons" id="buttons">
                <button id="btn-si" type="button">Si</button>
                <button id="btn-no" type="button">No</button>
            </div>
            <p class="note">⚠️ Warning: l’opzione “No” potrebbe non collaborare.</p>
            <div class="video-box" id="videoBox">
                <video id="video" controls>
                    <source src="Video WhatsApp 2025-02-04 ore 23.29.56_2dbc3b27.mp4" type="video/mp4" />
                </video>
            </div>
        </div>

        <div class="modal" id="loveModal" aria-hidden="true">
            <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalText">
                <p id="modalText"></p>
                <button id="modalOk" type="button">Ok</button>
            </div>
        </div>

        <script>
            const btnNo = document.getElementById("btn-no");
            const btnSi = document.getElementById("btn-si");
            const videoBox = document.getElementById("videoBox");
            const video = document.getElementById("video");
            const loveModal = document.getElementById("loveModal");
            const modalText = document.getElementById("modalText");
            const modalOk = document.getElementById("modalOk");
            let yesScale = 1;
            const loveMessage = "Sono il messaggio figo che dovra essere scritto alla fine, ma non so ancora cosa scrivere, quindi per ora questo è un placeholder. Ma non preoccuparti, sarà qualcosa di molto romantico e speciale, proprio come te!";

            const moveNoButton = () => {
                const padding = 16;
                const maxX = Math.max(padding, window.innerWidth - btnNo.offsetWidth - padding);
                const maxY = Math.max(padding, window.innerHeight - btnNo.offsetHeight - padding);
                const x = Math.max(padding, Math.random() * maxX);
                const y = Math.max(padding, Math.random() * maxY);

                btnNo.classList.add("no-fleeing");
                btnNo.style.left = `${x}px`;
                btnNo.style.top = `${y}px`;

                yesScale += 0.2;
                btnSi.style.transform = `scale(${yesScale})`;
                btnSi.style.background = "var(--pink-dark)";
            };

            btnNo.addEventListener("mouseenter", moveNoButton);
            btnNo.addEventListener("focus", moveNoButton);

            btnSi.addEventListener("click", () => {
                modalText.textContent = loveMessage;
                loveModal.classList.add("open");
                loveModal.setAttribute("aria-hidden", "false");
            });

            modalOk.addEventListener("click", () => {
                loveModal.classList.remove("open");
                loveModal.setAttribute("aria-hidden", "true");
                videoBox.classList.add("active");
                document.body.classList.add("show-video");
                if (video && video.querySelector("source").src) {
                    video.play().catch(() => {});
                }
            });
        </script>
    </body>
</html>